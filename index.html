<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attension is ALL you need</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font for a clean look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* The main pink surface container */
        #grid-container {
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            border-radius: 1rem;
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.5); /* Pink shadow for glow effect */
        }
        
        /* Individual grid cells */
        .grid-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem; /* text-xl */
            font-weight: 700; /* font-bold */
            cursor: pointer;
            transition: background-color 0.1s, transform 0.1s;
            border: 1px solid rgba(0, 0, 0, 0.1); /* Subtle dark border on pink */
            color: white; /* Default text color */
             background-color: #ec4899; /* Pink-500 when active */
        }

        /* Hover effect */
        .grid-cell:hover:not(.inactive) {
            opacity: 0.9;
            transform: scale(1.02);
        }

        /* Inactive state before the game starts or when paused/stopped */
        .grid-cell.inactive {
            cursor: not-allowed;
            background-color: #52525b; /* Gray-600 for inactive cells */
            color: #a1a1aa; /* Gray-400 text */
            pointer-events: none; 
            transition: none;
        }
        
        /* Correctly clicked cell */
        .grid-cell.clicked {
            background-color: #9d174d; /* Pink-800, darker shade */
            color: white;
            opacity: 0.2; /* Make it fade out */
            pointer-events: none;
        }

        /* Responsive Container */
        #game-area {
            width: 90vw;
            max-width: 600px;
            aspect-ratio: 1 / 1; 
        }

        /* Active button state transition */
        .btn-primary:active {
            box-shadow: 0 0px 0 #a2125e;
            top: 4px;
        }
        
        /* Class to hide the blocker completely */
        .blinker-hidden {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen flex flex-col items-center p-4">

    <div id="timer" class="text-6xl font-extrabold text-cyan-400 mb-6 mt-4 tabular-nums">00.00</div>

    <div id="game-area" class="flex-shrink-0 relative">
        <div id="grid-container" class="bg-pink-500">
            <!-- Grid Cells will be inserted here by JavaScript -->
        </div>
        
        <!-- Blocker Overlay with SVG Lock Icon -->
        <div id="blocker" class="absolute inset-0 bg-gray-900/95 flex flex-col items-center justify-center rounded-xl transition-opacity duration-300 z-10">
             <!-- Lock SVG (Lucide-React style) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-pink-400 mb-4 animate-pulse">
                <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            <span class="text-xl font-semibold text-gray-300">
                Grid is Locked
            </span>
        </div>
    </div>
    
    <div id="controls" class="flex items-center gap-4 mt-8 w-full max-w-xl">
        <!-- 1. Primary Button (Start/Stop) -->
        <button id="start-stop-btn" class="btn-primary flex-grow px-4 py-3 text-lg font-bold rounded-xl shadow-lg transition duration-200 
                                            bg-pink-600 hover:bg-pink-700 text-white relative top-0" style="box-shadow: 0 4px 0 #c95192;">
            Start
        </button>

        <!-- 2. Small Reset Button -->
        <button id="reset-btn" class="h-12 w-12 flex-shrink-0 text-sm font-bold rounded-xl shadow-inner transition duration-200 
                                       bg-gray-700 hover:bg-gray-600 text-gray-300">
            <span class="block px-1">RST</span>
        </button>

        <!-- 3. Counter (Fills remaining space) -->
        <div id="counter" class="flex-grow px-4 py-3 bg-gray-700 text-lg font-semibold rounded-xl text-center">
            Next: 1
        </div>
    </div>

    <script>
        // DOM Elements
        const gridContainer = document.getElementById('grid-container');
        const timerElement = document.getElementById('timer');
        const counterElement = document.getElementById('counter');
        const startStopBtn = document.getElementById('start-stop-btn');
        const resetBtn = document.getElementById('reset-btn');
        const blocker = document.getElementById('blocker');

        // Game State
        let gameActive = false; // True when clicking is enabled and timer runs
        let gameStarted = false; // True once the grid is shuffled
        let currentNumber = 1;
        let timerInterval = null;
        let timeElapsedOnPause = 0; 
        let startTime = 0; 
        const allCells = []; 

        // --- Initialization ---

        function initializeGrid() {
            gridContainer.innerHTML = '';
            allCells.length = 0;
            
            for (let i = 1; i <= 100; i++) {
                const cell = document.createElement('div');
                cell.classList.add('grid-cell', 'inactive');
                
                // Add rounded corners only to the perimeter cells
                if (i === 1) cell.classList.add('rounded-tl-xl');
                if (i === 10) cell.classList.add('rounded-tr-xl');
                if (i === 91) cell.classList.add('rounded-bl-xl');
                if (i === 100) cell.classList.add('rounded-br-xl');
                
                cell.textContent = i;
                cell.dataset.number = i; 
                cell.addEventListener('click', handleCellClick);
                gridContainer.appendChild(cell);
                allCells.push(cell);
            }
        }

        // --- Game Logic ---

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; 
            }
            return array;
        }

        /**
         * Prepares the game state and starts the timer.
         */
        function startGame() {
            if (!gameStarted) {
                // First time starting the game: shuffle
                gameStarted = true;
                timeElapsedOnPause = 0;
                
                let numbers = Array.from({ length: 100 }, (_, i) => i + 1);
                shuffleArray(numbers);

                // Apply shuffled numbers to cells
                allCells.forEach((cell, index) => {
                    cell.textContent = numbers[index];
                    cell.classList.remove('clicked'); 
                    cell.style.display = 'flex'; 
                });
            }

            // HIDE THE BLOCKER to reveal the grid
            blocker.classList.add('blinker-hidden');

            // Start/Continue the game
            gameActive = true;
            startStopBtn.textContent = 'Stop';
            startTimer();
            counterElement.textContent = `Next: ${currentNumber}`;
            
            // Re-enable interaction on all non-clicked cells
            allCells.forEach(cell => {
                if (!cell.classList.contains('clicked')) {
                    cell.classList.remove('inactive');
                }
            });
        }
        
        /**
         * Pauses the timer and prevents grid interaction.
         */
        function stopGame() {
            if (!gameActive) return;
            
            gameActive = false;
            stopTimer();
            startStopBtn.textContent = 'Continue';

            // SHOW THE BLOCKER to hide the grid content
            blocker.classList.remove('blinker-hidden');

            // Disable interaction
            allCells.forEach(cell => {
                if (!cell.classList.contains('clicked')) {
                    cell.classList.add('inactive');
                }
            });
        }

        /**
         * Handles clicking on a grid cell.
         */
        function handleCellClick(event) {
            if (!gameActive) return;

            const clickedCell = event.target;
            const clickedNumber = parseInt(clickedCell.textContent, 10);

            if (clickedNumber === currentNumber) {
                // Correct click
                clickedCell.classList.add('clicked'); 
                
                if (currentNumber === 100) {
                    winGame();
                } else {
                    currentNumber++;
                    counterElement.textContent = `Next: ${currentNumber}`;
                }
            } else {
                // Incorrect click: momentary visual feedback
                clickedCell.classList.add('ring-4', 'ring-red-500', 'ring-opacity-70', 'scale-105');
                setTimeout(() => {
                    clickedCell.classList.remove('ring-4', 'ring-red-500', 'ring-opacity-70', 'scale-105');
                }, 150);
            }
        }
        
        /**
         * Handles game completion.
         */
        function winGame() {
            stopTimer();
            gameActive = false;
            gameStarted = false;
            counterElement.textContent = `Completed in ${timerElement.textContent}s!`;
            startStopBtn.textContent = 'Play Again';
            
            // Re-enable the blocker to show the completion state
            blocker.classList.remove('blinker-hidden');
            blocker.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-400 mb-4 animate-bounce">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                    <path d="M22 4 12 14.01l-3-3"/>
                                </svg>
                                <span class="text-xl font-semibold text-green-300">
                                    Game Won!
                                </span>`;
        }

        /**
         * Resets the entire game to the initial, ordered, inactive state.
         */
        function resetGame() {
            stopTimer();
            gameActive = false;
            gameStarted = false;
            timeElapsedOnPause = 0;
            currentNumber = 1;
            timerElement.textContent = '00.00';
            counterElement.textContent = 'Next: 1';
            startStopBtn.textContent = 'Start';

            // SHOW THE BLOCKER and reset its content
            blocker.classList.remove('blinker-hidden');
            blocker.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-pink-400 mb-4 animate-pulse">
                                    <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                </svg>
                                <span class="text-xl font-semibold text-gray-300">
                                    Grid is Locked
                                </span>`;


            // Reset cells to ordered, inactive state
            allCells.forEach((cell, index) => {
                cell.textContent = index + 1;
                cell.classList.add('inactive');
                cell.classList.remove('clicked');
                cell.style.display = 'flex'; 
            });
        }

        // --- Timer Functions ---

        /**
         * Starts the timer from the current elapsed time.
         */
        function startTimer() {
            stopTimer(); 
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 10); 
        }

        /**
         * Stops the timer and updates timeElapsedOnPause.
         */
        function stopTimer() {
            clearInterval(timerInterval);
            if (startTime > 0) {
                timeElapsedOnPause += (Date.now() - startTime);
                startTime = 0; 
            }
        }

        /**
         * Updates the timer display.
         */
        function updateTimer() {
            let totalTime = timeElapsedOnPause;
            if (startTime > 0) {
                totalTime += (Date.now() - startTime);
            }
            
            const seconds = totalTime / 1000;
            timerElement.textContent = seconds.toFixed(2).padStart(5, '0');
        }

        // --- Event Listener and Startup ---

        startStopBtn.addEventListener('click', () => {
            if (gameActive) {
                stopGame(); // Pause the game
            } else {
                startGame(); // Start or Continue the game
            }
        });
        
        resetBtn.addEventListener('click', resetGame);

        // Initialize the grid when the script loads
        initializeGrid();
    </script>

</body>
</html>
